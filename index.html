<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ü¶Ü Duck Racing Game</title>
<style>
body{
  font-family:"Baloo 2",system-ui;
  background:linear-gradient(120deg,#0f2027,#203a43,#2c5364);
  color:#fff;margin:0;padding:0;
}
.container{
  max-width:900px;margin:auto;padding:16px;
}
.card{
  background:#111a22;border-radius:18px;
  padding:16px;margin-bottom:14px;
  box-shadow:0 12px 30px rgba(0,0,0,.35);
}
h1{margin-top:6px;text-align:center}
textarea{
  width:100%;min-height:90px;border-radius:12px;
  border:none;padding:12px;font-size:15px;
}
button{
  width:100%;padding:12px;border:none;
  border-radius:12px;font-size:16px;
  background:#ffb703;color:#000;font-weight:700;
}
.track{
  margin-top:14px;border-radius:16px;
  background:#0c131a;padding:10px;overflow:hidden;
}
.duck{
  display:flex;align-items:center;
  gap:8px;font-size:17px;font-weight:700;
  padding:8px 10px;border-radius:12px;
  margin-bottom:6px;position:relative;
  transform:translateX(0);
  transition:transform .3s ease-out;
}
.duck span.time{font-size:12px;opacity:.8}
.finish-line{
  position:absolute;right:10px;top:0;bottom:0;
  border-left:3px dashed #ffb703;
}
.board{
  margin-top:14px;
}
.board li{
  padding:6px 10px;border-radius:10px;
  margin-bottom:6px;list-style:none;
  background:#15212b;
}
.board li.gold{background:#ffd70022;border:1px solid #ffd700}
.board li.silver{background:#c0c0c022;border:1px solid #c0c0c0}
.board li.bronze{background:#cd7f3222;border:1px solid #cd7f32}
.win-wobble{animation:wobble 1s infinite;}
.win-rotate{animation:spin 1s infinite;}
.win-bounce{animation:bounce 1s infinite;}
@keyframes wobble{0%,100%{transform:rotate(-2deg)}50%{transform:rotate(2deg)}}
@keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}
@keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-6px)}}
@media(max-width:600px){
  .duck{font-size:15px}
}
</style>
</head>
<body>
<div class="container">
  <h1>ü¶Ü DUCK RACING</h1>

  <div class="card">
    <p>Nh·∫≠p t√™n v·ªãt (m·ªói d√≤ng 1 t√™n):</p>
    <textarea id="duckNames"></textarea>
    <button onclick="startRace()">B·∫Øt ƒë·∫ßu ƒëua</button>
  </div>

  <div class="card track" id="track"></div>
  <div class="finish-line"></div>

  <div class="card">
    <h3>üèÜ B·∫£ng x·∫øp h·∫°ng</h3>
    <ul id="ranking" class="board"></ul>
  </div>
</div>

<script>
const colors=["#ffbe0b","#fb5607","#ff006e","#8338ec","#3a86ff","#06d6a0","#ff9f1c","#ffd166"];
const effects=["win-wobble","win-rotate","win-bounce"];

let startTime, finished=[];

function startRace(){
  const track=document.getElementById("track");
  const ranking=document.getElementById("ranking");
  track.innerHTML=""; ranking.innerHTML="";
  finished=[];

  const names=document.getElementById("duckNames").value
    .split("\n")
    .map(x=>x.trim())
    .filter(x=>x !== "");   // xo√° d√≤ng tr·ªëng

  if(!names.length){alert("Nh·∫≠p t√™n v·ªãt tr∆∞·ªõc!");return;}

  startTime=performance.now();

  names.forEach((name,i)=>{
    const duck=document.createElement("div");
    duck.className="duck";
    duck.style.background=colors[i%colors.length]+"33";
    duck.dataset.name=name;
    duck.dataset.color=colors[i%colors.length];

    const icon=document.createElement("span");
    icon.textContent="ü¶Ü";
    icon.style.color=colors[i%colors.length];

    const label=document.createElement("span");
    label.textContent=name;

    const time=document.createElement("span");
    time.className="time";
    time.textContent="‚è±...";

    duck.append(icon,label,time);
    track.appendChild(duck);

    animateDuck(duck,time);
  });
}

function animateDuck(duck,timeEl){
  let pos=0;
  const finish=90+Math.random()*6;
  const speed=1+Math.random()*1.3;

  const move=setInterval(()=>{
    pos+=Math.random()*speed;
    duck.style.transform=`translateX(${pos}%)`;

    if(pos>=finish){
      clearInterval(move);
      const t=((performance.now()-startTime)/1000).toFixed(2);
      timeEl.textContent=`‚è± ${t}s`;
      onFinish(duck,t);
    }
  },100);
}

function onFinish(duck,t){
  finished.push({
    name:duck.dataset.name,
    time:parseFloat(t),
    color:duck.dataset.color,
    el:duck
  });

  updateRanking();
}

function updateRanking(){
  const ranking=document.getElementById("ranking");
  ranking.innerHTML="";

  // s·∫Øp x·∫øp tƒÉng d·∫ßn th·ªùi gian
  finished.sort((a,b)=>a.time-b.time);

  // b·ªè hi·ªáu ·ª©ng c≈© tr∆∞·ªõc
  document.querySelectorAll(".duck")
    .forEach(d=>d.classList.remove("win-wobble","win-rotate","win-bounce"));

  finished.forEach((d,i)=>{
    const li=document.createElement("li");
    li.textContent=`${i+1}. ${d.name} ‚Äî ${d.time.toFixed(2)}s`;

    ranking.appendChild(li);
  });
}
</script>

</body>
</html>
